---
layout: post
title: Osa 8
date: 8.11.2021
---

## Omat funktiot

Aikaisemmissa osissa on käytetty esimerkiksi funktioita `len`, `print` ja `input` eri tarkoituksiin. Nämä ovat Pythonin sisäänrakennettuja funktioita, mutta voimme myös määritellä omia funktioita.

## Funktion määrittely

Oma funktio määritellään avainsanalla `def` (lyhenne sanasta define). Funktiolle annetaan jokin _nimi_, jonka jälkeen on alku- ja loppusulku sekä kaksoispiste. Funktioon kuuluva koodi kirjoitetaan sisennettynä omaan lohkoonsa.

Esimerkiksi seuraava koodi määrittelee funktion `viesti`:

```python
def viesti():
    print("Tämä on oma funktio!")
```

Jos yllä oleva ohjelma suoritetaan, se ei näytä tekevän mitään. Tämä johtuu siitä, että funktion sisältämä koodi suoritetaan vasta silloin, kun funktiota _kutsutaan_.

Funktion kutsuminen tapahtuu funktion nimellä. Esimerkiksi seuraava koodi kutsuu funktiota:

```python
def viesti():
    print("Tämä on oma funktio!")

viesti()
```

```
Tämä on oma funktio!
```

Samaa funktiota voidaan määrittelyn jälkeen kutsua useita kertoja.

```python
def viesti():
    print("Tämä on oma funktio!")

viesti()
viesti()
viesti()
```

```
Tämä on oma funktio!
Tämä on oma funktio!
Tämä on oma funktio!
```

Kun ohjelma koostuu pelkästään funktiosta, ei sen suorittaminen näytä tekevän mitään. Esimerkiksi seuraava ohjelma ei tulosta mitään:

```python
def moikkaa():
    print("Moi!")
```

Funktion `moikkaa` sisällä oleva koodi suoritetaan vasta, kun funktiota kutsutaan.

Funktion alla olevaan "pääohjelmaan" kannattaa siis kirjoittaa sopivia funktiokutsuja ohjelman testaamiseksi, esimerkiksi:

```python
def moikkaa():
    print("Moi!")

# Pääohjelma on se ohjelman osa, joka ei ole minkään funktion sisällä
# Kutsutaan omaa funktiota

moikkaa()
```

Usein pääohjelma kirjoitetaan erillisen lohkon ``if __name__ == "__main__":`` sisään. Tällä on omat tarkoituksensa, mutta ei mennä niihin nyt. Alla on esimerkki, miten ko. lohkoa käytetään.

```python
def moikkaa():
    print("Moi!")

# Usein pääohjelma kirjoitetaan seuraavanlaisen lohkon sisälle
if __name__ == "__main__":
    moikkaa()
```

Yllä olevan koodin suoritus ei tässä vaiheessa näytä poikkeavan mitenkään alla olevasta koodista. Molemmat tavat ovat tässä vaiheessa oikein. Huomaa kuitenkin, että ``if __name__ == "__main__":``-lohkoa käytettäessä pääohjelma on sisennettävä, mutta ilman ko. lohkoa sisennystä ei tehdä (kuten alla).

```python
def moikkaa():
    print("Moi!")

# Kirjoita pääohjelma aina seuraavanlaisen lohkon sisälle
moikkaa()
```

***

## Tehtävä 1

Tee funktio `seitseman_veljesta` jonka kutsuminen tulostaa seitsemän veljeksen nimet aakkosjärjestyksessä:

```
Aapo
Eero
Juhani
Lauri
Simeoni
Timo
Tuomas
```

***

## Funktion parametri

Usein funktiolla on yksi tai useampi _parametri_, jolla sen toimintaan voi vaikuttaa. Esimerkiksi Pythonin valmiissa funktioissa `print` ja `input` parametrin avulla annetaan näytettävä teksti:

```python
print("Hei!")                     # parametrina merkkijono "Hei!"
nimi = input("Kerro nimesi: ")    # parametrina merkkijono "Kerro nimesi: "
print(nimi)                       # parametrina muuttujan nimi arvo
```

Voimme määritellä parametreja myös omille funktioillemme. Parametrit määritellään funktion nimen jälkeen olevien sulkujen sisällä:

```python
def tervehdi(kohde):
    print("Hei", kohde)
```

Jos funktiota kutsutaan kaksi kertaa

```python
tervehdi("Emilia")
tervehdi("maailma!")
```

tulostaa se kaksi erilaista tervehdystä:

```
Hei Emilia
Hei maailma!
```

Katsotaan funktion määrittelyä vielä tarkemmin:

```python
def tervehdi(kohde):
    print("Hei", kohde)
```

Määrittelimme ensimmäisellä rivillä, että funktion parametri on nimeltään `kohde`. Toisella rivillä `print`-komento käyttää parametrissa `kohde` olevaa arvoa.

Kun funktiota kutsutaan, saa parametri _funktiokutsussa_ annettavan arvon. Esimerkiksi kun kutsutaan

```python
nimi = "Antti"
tervehdi(nimi)
```

niin parametrin `kohde` arvo funktiossa on merkkijono `Antti`.

Funktioiden ja parametrien nimeämistä koskevat samat periaatteet kuin mitä olemme jo aiemmin käsitelleet, eli nimien kannattaa olla kuvaavia ja käytössä ovat ensisijaisesti pienet kirjaimet sekä alaviiva.

***

## Tehtävä 2

Täydennä koodipohjassa oleva funktio `ensimmainen` siten, että se tulostaa parametrinaan saamansa merkkijonon ensimmäisen merkin. Merkkijonon ensimmäinen merkki voidaan tulostaa esimerkiksi seuraavasti:

```python
teksti = "hei"
print(teksti[0]) # Tulostaa kirjaimen h
```

Tässä koodipohja täydennettäväksi:

```python
def ensimmainen(merkkijono):
     # kirjoita koodia tähän

# kokeillaan funktiota:
if __name__ == "__main__":
    ensimmainen('python')
    ensimmainen('yhtälö')
    ensimmainen('tieto')
    ensimmainen('huominen')
    ensimmainen('omena')
    ensimmainen('nukkumaanmenoaika')
```

Esimerkkitulostus:

```
p
y
t
h
o
n
```

***


Kun omassa funktiossa on määritelty yksi tai useampia parametreja, kannattaa funktiota testata usealla erilaisella parametrilla.

Kannattaa erityisesti miettiä, toimivatko myös "erikoistapaukset": mitä funktio esimerkiksi tekee, jos sille annetaan negatiivinen luku tai liukuluku kokonaisluvun sijasta.

Omien funktioiden käyttö tehtäviä tehdessä on suotavaa, vaikka niitä ei erikseen pyydettäisi. Sopivasti nimettyjen funktioiden avulla koodista saadaan huomattavasti selkeämpää ja lyhyempää verrattuna siihen, että kaikki kirjoitetaan yhteen pötköön.

## Lisää esimerkkejä

Katsotaan vielä pari muuta esimerkkiä parametrien käyttämisestä. Seuraavassa funktiossa parametri on luku:

```python
def nelio(x):
    print(f"Luvun {x} neliö on {x * x}")

nelio(2)
nelio(5)
```

```
Luvun 2 neliö on 4
Luvun 5 neliö on 25
```

Seuraavassa esimerkissä funktion sisällä on ehtorakenne:

```python
def tervehdi(nimi):
    if nimi == "Emilia":
        print("Heippa,", nimi)
    else:
        print("Moikka,", nimi)

tervehdi("Emilia")
tervehdi("Matti")
```

```
Heippa, Emilia
Moikka, Matti
```

Seuraavassa funktiossa puolestaan on kaksi parametria:

```python
def summa(x, y):
    tulos = x + y
    print(f"Parametrien {x} ja {y} summa on {tulos} ")

summa(1, 2)
summa(5, 24)
```

```
Parametrien 1 ja 2 summa on 3
Parametrien 5 ja 24 summa on 29
```

Funktio myös määrittelee "apumuuttujan" _tulos_, mihin se sijoittaa parametriensa summan.

**Huomaa, että parametrien nimillä ei ole mitään tekemistä funktion ulkopuolella olevien muuttujien kanssa.** Esimerkiksi jos kutsumme äskeistä funktiota

```python
x = 100
y = 30
summa(1, 2)
summa(x + y, 10)
```

niin tuloksena on:

```
Parametrien 1 ja 2 summa on 3
Parametrien 130 ja 10 summa on 140
```

Ensimmäisessä kutsussa parametrien arvot funktion sisällä ovat `x = 1` ja `y = 2`, ja toisessa kutsussa arvot ovat `x = 130` ja `y = 10`.

<!--vastaava varoitusteksti löytyy osioista 3-4, 4-6 ja 5-1, tsekkaa kaikki jos muokkaat tätä-->
## Varoitus: globaalin muuttujan käyttö funktion sisällä

Kuten olemme nähneet, funktioiden sisällä on mahdollista määritellä muuttujia. Funktio näkee kuitenkin pääohjelmassa määritellyt muuttujat. Tälläisia muuttujia sanotaan _globaaleiksi_ muuttujiksi.

Globaalien muuttujien käyttämistä funktion sisältä kannattaa välttää. Se voi johtaa ikäviin bugeihin.

Seuraavassa on esimerkki funktiosta, joka käyttää "vahingossa" globaalia muuttujaa:

```python
# globaali muuttuja
nimi = "Emilia"

def tervehdi(etunimi):
    # tulostetaan vahingossa parametrin sijaan globaalin muuttujan arvo
    print("Hei", nimi)

tervehdi("Antti")
tervehdi("Emilia")
```

```
Hei Emilia
Hei Emilia
```

Vaikka funktiota kutsutaan oikein, se tulostaa aina globaalissa muuttujassa olevan nimen _Emilia_.

***

## Tehtävä 3

Tee funktio `keskiarvo`, joka saa parametrina kolme kokonaislukua. Funktio tulostaa parametriensa keskiarvon.

```python
keskiarvo(5, 3, 1)
keskiarvo(10, 1, 1)
```

Esimerkkitulostus:

```
3.0
4.0
```

## Tehtävä 4

Täydennä alla olevaan koodipohjaan funktio `tulosta_monesti(merkkijono, kertaa)`, joka saa parametriksi merkkijonon sekä kokonaisluvun, joka kertoo, montako kertaa funktion tulee tulostaa parametrina saamansa merkkijono. *Vihje: muista, että while-silmukkaan pystyi antamaan ehtoja.*

```python
def tulosta_monesti(merkkijono, kertaa):
    # Toteuta tulostaminen tähän


# Esimerkkisuoritus
tulosta_monesti("hei", 5)

print()

merkkijono = "Alussa olivat suo, kuokka ja Python"
kertaa = 3
tulosta_monesti(merkkijono, kertaa)
```

Esimerkkitulostus yllä olevasta suorituksesta:

```
hei
hei
hei
hei
hei

Alussa olivat suo, kuokka ja Python.
Alussa olivat suo, kuokka ja Python.
Alussa olivat suo, kuokka ja Python.
```

## Tehtävä 5

Tee funktio `risunelio(pituus)` joka saa parametriksi kokonaisluvun, joka kertoo kuinka suuri risuneliö funktion pitää tulostaa:

```python
risunelio(3)
print()
risunelio(5)
```

```
###
###
###

#####
#####
#####
#####
#####
```